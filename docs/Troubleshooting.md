# Troubleshooting

If you run into issues with Katheryne, check the following common problems and solutions:

## Node.js Issues

1. **Module Not Found / Build Errors**
   - Ensure you ran:
     ```bash
     cd node
     npm install
     npm run build
     ```
   - If the error persists, try cleaning the cache:
     ```bash
     npm cache clean --force
     ```

2. **TypeScript Errors**
   - Verify that your version of Node.js and npm meet the minimum requirements.
   - Run:
     ```bash
     npm run clean
     npm run build
     ```
   - Check that your tsconfig.json is not altered.

## Python Issues

1. **Missing Dependencies or PyTorch Errors**
   - Make sure you're using Python 3.8 or higher.
   - Reinstall dependencies with:
     ```bash
     cd python
     pip install -r requirements.txt
     ```
   - For CUDA-related errors, verify that your PyTorch installation matches your CUDA version. See [PyTorch website](https://pytorch.org) for instructions.

2. **Training Failures or Convergence Issues**
   - If the loss does not decrease during training, try reducing the learning rate:
     ```bash
     python python/train_assistant.py --learning-rate 0.0005
     ```
   - Ensure that your training data (generated by generate_training_data.py) is correctly formatted.
   - Try increasing the number of epochs or adjusting the batch size.
   - Check if your GPU has enough memory (if using CUDA).

## Runtime Issues

1. **Interactive Session Fails to Launch**
   - Run the interactive mode with:
     ```bash
     python python/main.py
     ```
   - Check for error logs printed in the console.
   - Verify that all dependencies were installed correctly.
   - Make sure the model checkpoint exists in data/models/.

2. **Model Checkpoint Not Found**
   - Training produces checkpoint files in the `data/models/` directory. 
   - Ensure you have run the training script and that `assistant_best.pt` exists.
   - For autoencoder models, verify that the corresponding files exist:
     - `characters_autoencoder.pt`
     - `artifacts_autoencoder.pt`
     - `weapons_autoencoder.pt`

3. **Out of Memory Errors**
   - If using GPU:
     - Reduce batch size
     - Try using gradient accumulation
     - Enable mixed precision training
   - If using CPU:
     - Reduce model size (embedding_dim, hidden_dim)
     - Process smaller batches
     - Free unused memory with `torch.cuda.empty_cache()`

## Data Issues

1. **Training Data Generation Fails**
   - Check that raw data files exist in `data/raw/`
   - Verify JSON formatting in source files
   - Look for error messages in the console output
   - Try running with `--debug` flag for more information

2. **Incorrect or Missing Responses**
   - Verify that training completed successfully
   - Check the training loss history
   - Ensure the vocabulary covers your query terms
   - Try regenerating training data if responses seem outdated

## Environment Configuration

1. **Basic Setup**
   - Confirm Python and Node.js versions
   - Check CUDA installation (if using GPU)
   - Verify all required paths exist

2. **Advanced Configuration**
   - Review any custom environment variables
   - Check GPU drivers and CUDA toolkit version
   - Verify PyTorch was installed with CUDA support

## Getting Help

If your problem persists:

1. **Check Existing Issues**
   - Search the [GitHub Issues](https://github.com/yourusername/Katheryne/issues) page
   - Look for similar problems and solutions

2. **Create a New Issue**
   Include:
   - Your operating system and version
   - Python and Node.js versions
   - Error messages and logs
   - Steps to reproduce the problem
   - Any relevant configuration files

3. **Contact Support**
   - Email: coff33ninja69@gmail.com
   - Discord: DRAGOHN#1282

Remember to check the [User Guide](UserGuide.md) and [Installation Guide](Installation.md) for detailed setup instructions and usage examples.